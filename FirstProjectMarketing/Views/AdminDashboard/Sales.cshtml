@model IEnumerable<FirstProjectMarketing.Models.Firstorderproduct>

@{
    ViewData["Title"] = "Sales";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}


<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link href="~/Content/bootstrap.css" rel="stylesheet" />

 <link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />

 <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>
<link href="~/css/site.css" rel="stylesheet" />

</head>

          <body>
  <div class="container-fluid">
<div class="row">
<div class="col-12" style="padding: 40px;
    border: 1px solid;
     max-width: 97%!important; 
    margin: 0px 0px 20px 13px;">
    <div class="row col-6" style="margin-bottom:20px; justify-content:space-evenly">
        <label>Filtering By :</label>
        <a type="submit" class="btn btn-outline-info" asp-action="dailySales" asp-controller="AdminDashboard" >daily</a>
        <a type="submit" class="btn btn-outline-secondary" asp-action="MonthlySales" asp-controller="AdminDashboard" >Monthly</a>
        <a type="submit" class="btn btn-outline-success" asp-action="yearlySales" asp-controller="AdminDashboard" >yearly</a>
    </div>
<form asp-action="Sales" method="post" >
    <div class="row row-space">
        <div class="col-4">
            <div class="input-group" style="align-items: baseline;">
                <label class="label">Start Date</label>
                <input type="date" name="startDate" value="" placeholder="Start Date" class="form-control" style="margin-left:10px" />
            </div>
        </div>
        <div class="col-4">
            <div class="input-group" style="align-items: baseline;">
                <label class="label">End Date</label>
                <input type="date" name="endDate" value="" placeholder="End Date" class="form-control" style="margin-left:10px"/>
            </div>
        </div>
        <div class="col-4">
            <button type="submit" class="btn btn-dark"> Search </button>
        </div>
    </div>
</form>
</div>
</div>
                    <!-- DataTales Example -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            <h2 class="m-0 font-weight-bold text-primary">Sales</h2>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                    <table class="table table-bordered dataTable" id="dataTable" width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info" style="width: 100%;">
                                    <thead>
                                        <tr role="row">
                                            <th class="sorting sorting_asc" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 74px;">
                                                Paydate
                                                </th>
                                            <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 96px;">
                                                Product Name
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" style="width: 58px;">
                                                WholesalePrice
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 31px;">
                                                Price
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 70px;">
                                                Quantity
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 67px;">
                                                Category Name
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 67px;">
                                                Store Name
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 67px;">
                                                User Name
                                            </th>
                                       </tr>
                                    </thead>
                                    <tfoot>
                                        <tr>
                                            <th rowspan="1" colspan="8">
                                                <h2 style="display:initial; flex:content; margin-left:15px">Total Sales : $@ViewBag.totalSales</h2>
                                            
                                                <h2 style="display:initial; flex:content; margin-left:60px">Profits : $@ViewBag.profits</h2>
                                            </th>
                                        </tr>
                                        @*<tr>
                                            <th rowspan="1" colspan="1">Paydate</th>
                                            <th rowspan="1" colspan="1">Product Name</th>
                                            <th rowspan="1" colspan="1">Dicription</th>
                                            <th rowspan="1" colspan="1">Quantity</th>
                                            <th rowspan="1" colspan="1">Catigory Name</th>
                                            <th rowspan="1" colspan="1">Store Name</th>
                                            <th rowspan="1" colspan="1">User Name</th>
                                            <th rowspan="1" colspan="1">Phone</th>
                                        </tr>*@
                                    </tfoot>
                                    <tbody>
                                        @foreach (var item in Model)
                                       {
                                           <tr class="odd">
                                            <td class="sorting_1">@item.Order.OrderPaydate.Value.ToShortDateString()</td>
                                            <td>@item.Product.ProductName</td>
                                            <td>@item.Product.ProductWholesaleprice</td>
                                            <td>@item.Product.ProductPrice</td>
                                            <td>@item.Quantity</td>
                                            <td>@item.Product.Catigory.CatigoryName</td>
                                            <td>@item.Product.Catigory.Store.StoreName</td>
                                            <td>@item.Order.User.Username</td>
                                            </tr>
                                       }
                                        
                                      </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>

         <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

 <script src="https://cdn.datatables.net/1.11.1/js/jquery.dataTables.min.js" defer></script>

 <script src="https://cdn.datatables.net/buttons/2.0.0/js/dataTables.buttons.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.0.0/js/buttons.html5.min.js" defer></script>
    <script>

$(document).ready(function () {
$('#dataTable').DataTable({
    "language": {
    "paginate": {
      "previous": '‹',
      'next':     '›',

    }
  },
dom: 'Bfrtip',
 buttons: [
                { extend: 'copyHtml5', footer: true },
                { extend: 'csvHtml5', footer: true },
                { extend: 'excelHtml5', message: `Total Sales: ${@ViewBag.totalSales}     profits: ${@ViewBag.profits}`,
                    exportOptions: {
                    columns: ':visible'
                    },
                    customize: function (doc) {

                    // Create a footer
                    doc['footer']=(function(page, pages) {
                        return {
                            columns: [
                                'This is your left footer column',
                                {
                                    // This is the right column
                                    alignment: 'right',
                                    text: ['page ', { text: page.toString() },  ' of ', { text: pages.toString() }]
                                }
                            ],

                        }
                    });
                     }
                     },

               { extend: 'pdfHtml5',
                    message: `Total Sales: ${@ViewBag.totalSales}     profits: ${@ViewBag.profits}`,
                    exportOptions: {
                    columns: ':visible'
                    },
                    customize: function (doc) {

                        // Create a footer
                        doc['footer']=(function(page, pages) {
                            return {
                                columns: [
                                    'This is your left footer column',
                                    {
                                        // This is the right column
                                        alignment: 'right',
                                        text: ['page ', { text: page.toString() },  ' of ', { text: pages.toString() }]
                                    }
                                ],

                            }
                        });
                     }
               }
            ]
});
});

</script>
</body>    
